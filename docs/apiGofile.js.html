<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: apiGofile.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: apiGofile.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const https = require('https');
/**
 * @constant {string}
 * @default  
 */
const baseUri = "https://apiv2.gofile.io/"


/**
 *  @classdesc api wrapper class for Gofile rest api
 */


class apiGofile {

/** 
 * @param {string} email your email
 * @param {string} token  your apikey on profile page
 */
    
    constructor(email, token) {
        /**
         * @property email your account email
         */
        this.email = email;
        /**
         * @property your account apikey
         */
        this.token = token;
    }
    /**
     * Callback for getting response from https call
     *
     * @callback httpsResponse
     * @param {Error} err -error of https request
     * @param {string|*} body -body of https response
     */

    /**
     *  Get the best server to post in.
     * 
     * The server chosen with this function will have better connection quality.
     * 
     * @async
     * 
     * @param {httpsResponse} callback - handles the https request result
     * 
     */
    getBestServer(callback) {

        https.get(baseUri + "getServer", (res) => {

            let body = "";

            res.on("data", (data) => {
                body += data;
            });

            res.on("end", () => {
                body = (JSON.parse(body));
                callback(null, body);

            });

            res.on("error", (err) => {
                callback(err, null);
            });
        });

    }

    /**
     *  Get an account info.
     * 
     *  Data returned are : email, account type (e.g. donor, standar), file count, file size.
     * 
     * @async
     * @param {string} token - your token or someone else token (api key in profile page)
     * @param {httpsResponse} callback - handles the https request result
     * 
     */

    getAccountInfo(token, callback) {
        
        https.get(baseUri + "getAccountInfo?token=" + token, (res) => {

            let body = "";

            res.on("data", (data) => {
                body += data;
            });

            res.on("end", () => {
                body = (JSON.parse(body));
                callback(null, body);

            });

            res.on("error", (err) => {
                callback(err, null);
            });
        });
    }

    /**
     *  Get an account upload list.
     * 
     *  Data returned are all upload with all data of file uploaded.
     * 
     * @async
     * @param {string} token - your token or someone else token (api key in profile page)
     * @param {httpsResponse} callback - handles the https request result
     * 
     */
    getUploadList(token, callback) {
        
        https.get(baseUri + "getUploadsList?token=" + token, (res) => {

            let body = "";

            res.on("data", (data) => {
                body += data;
            });

            res.on("end", () => {
                body = (JSON.parse(body));
                callback(null, body);

            });

            res.on("error", (err) => {
                callback(err, null);
            });
        });
    }
    /**
     *  Delete all upload by name of a file.
     * 
     *  It delete all file in all upload with the file inside.
     * 
     * @async
     * @param {string} name - your token or someone else token (api key in profile page)
     * @param {httpsResponse} callback - handles the https request result
     * 
     */
    deleteUpload(name, callback) {
        let upload, upName;
        
        this.getUploadList(this.token, (err, body) => {
            
            for (upload in body.data) {
               
                for (upName in body.data[upload].files) {
                    
                    if (body.data[upload].files[upName].name == name) {
                       
                        https.get("https://" + body.data[upload].server + ".gofile.io/deleteUpload?c=" + body.data[upload].code + "&amp;ac=" + body.data[upload].adminCode + "&amp;removeAll=true", (res) => {
                            let body = "";

                            res.on("data", (data) => {
                                body += data;
                            });

                            res.on("end", () => {
                                body = (JSON.parse(body));
                                callback(null, body);

                            });

                            res.on("error", (err) => {
                                callback(err, null);
                            });
                        });
                    }
                }
            }
        });
    }

}


/*let a = new apiGofile("", "9390a84e74839a6a4dac50d0930e290facefa5bee1e92184a0d64a28fd63e2de");

a.getBestServer((err, body) => {
    if (err) {
        console.log(err);
    } else {
        console.log(body);
    }
});
/*


a.getAccountInfo("9390a84e74839a6a4dac50d0930e290facefa5bee1e92184a0d64a28fd63e2de", (err, body) => {
    if (err) {
        console.log(err);
    } else {
        console.log(body);
    }
});

a.getUploadList("9390a84e74839a6a4dac50d0930e290facefa5bee1e92184a0d64a28fd63e2de", (err, body) => {
    if (err) {
        console.log(err);
    } else {
        console.log(body.data[0].files);
        console.log(body);
    }
});

a.deleteUpload("a", (err, body) => {
    if (err) {
        console.log(err);
    } else {

        console.log(body);
    }
});

a.deleteUpload("CascadiaCode-2009.22.zip", (err, body) => {
    if (err) {
        console.log(err);
    } else {

        console.log(body);
    }
});
*/
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="apiGofile.html">apiGofile</a></li></ul><h3>Global</h3><ul><li><a href="global.html#baseUri">baseUri</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Thu Dec 03 2020 12:11:24 GMT+0100 (Ora standard dellâ€™Europa centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
